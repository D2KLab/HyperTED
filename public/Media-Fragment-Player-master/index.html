<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:foaf="http://xmlns.com/foaf/0.1/" 
	xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#">
  <head>
  	<!-- meta data -->
  	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
	<meta name="author" content="Yunjia Li"/>
	<meta name="description" content="Synote Media Fragment Player demo page" />
	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
	
	<!-- development src-->
	
	<link rel="stylesheet" type="text/css" href="build/mediaelementplayer.min.css" />
	<link rel="stylesheet" type="text/css" href="src/css/smfplayer.css" />
	<script type="text/javascript" src="src/jquery.url.js"></script>
	<script type="text/javascript" src="src/mediafragments.js"></script>
	<script type="text/javascript" src="build/mediaelement-and-player.min.js"></script>
	<script type="text/javascript" src="src/synote.multimedia.namespace.js"></script>
	<script type="text/javascript" src="src/synote.multimedia.utils.js"></script>
	<script type="text/javascript" src="src/synotemfplayer.js"></script>
	
	<!-- product src -->
	<!--<link rel="stylesheet" type="text/css" href="build/mediaelementplayer.min.css" />
	<link rel="stylesheet" type="text/css" href="build/smfplayer.css" />
	<script type="text/javascript" src="build/mediaelement-and-player.min.js"></script>
	<script type="text/javascript" src="build/smfplayer.min.js"></script>-->
	

	<title>Synote Media Fragment Player Demo</title>
    
    <script type="text/javascript">
    	var playerArr = []
    	$(document).ready(function(){	    	
	    	
	    	
	    		//if($("#player_div").data('smfplayer') !== undefined)
	    		//{
	    			//console.log('destroy');
	    		//	$("#player_div").smfplayer('destroy');
	    		//}
	    		
		    	var mfuri_mp4 = "http://synote.org/resource/yunjiali/bigbuck.mp4#t=11,19&xywh=120,120,120,120";
		    	var player_mp4 = $("#player_mp4_div").smfplayer({
		    		mfURI:mfuri_mp4, 
		    		mfAlwaysEnabled:false,
		    		width:480,
		    		height:320,
		    		autoStart:false,
		    		success:function(mediaElement,domObject,p){
			    		mediaElement.addEventListener('timeupdate', function(e){
				    		var ct = mediaElement.currentTime;
				    		$("#currenttime_mp4_span").text(ct);
			    		});
		    		}
		    	});
		    			    	
		    	if(player_mp4 !== undefined)
			    {
			    	playerArr.push(player_mp4);
			    	$("#controls_mp4_div").show();	
			    	$("#pause_mp4_btn").click(function(){
				    	player_mp4.pause();
			    	});
			    	$("#play_mp4_btn").click(function(){
				    	player_mp4.play();
			    	});
			    	$("#mf_mp4_btn").click(function(){
				    	player_mp4.playmf();
			    	});

			    	$("#options_mp4_div").text(player_mp4.getOptions().mfURI).show();
			    }

			    //youtube1
			    var mfuri_yt1 = "http://www.youtube.com/watch?v=Ug6XAw6hzaw#t=00:01:30,00:01:33&xywh=40,220,200,50";
		    	var player_yt1 = $("#player_yt1_div").smfplayer({
		    		mfURI:mfuri_yt1, 
		    		mfAlwaysEnabled:false,
		    		autoStart:false,
		    		width:480,
		    		height:320,
		    		success:function(mediaElement,domObject,p){
			    		mediaElement.addEventListener('timeupdate', function(e){
				    		var ct = mediaElement.currentTime;
				    		$("#currenttime_yt1_span").text(ct);
			    		});
		    		}
		    	});
		    			    	
		    	if(player_yt1 !== undefined)
			    {
			    	playerArr.push(player_yt1);
			    	$("#controls_yt1_div").show();	
			    	$("#pause_yt1_btn").click(function(){
				    	player_yt1.pause();
			    	});
			    	$("#play_yt1_btn").click(function(){
				    	player_yt1.play();
			    	});
			    	$("#mf_yt1_btn").click(function(){
				    	player_yt1.playmf();
			    	});
			    	$("#options_yt1_div").text(player_yt1.getOptions().mfURI).show();
			    }

			    //youtube2
			    var mfuri_yt2 = "http://www.youtube.com/watch?v=K8_IucR0l7Q#t=00:02:56,00:03:02&xywh=90,190,200,70";
		    	var player_yt2 = $("#player_yt2_div").smfplayer({
		    		mfURI:mfuri_yt2, 
		    		mfAlwaysEnabled:false,
		    		autoStart:false,
		    		width:480,
		    		height:320,
		    		success:function(mediaElement,domObject,p){
			    		mediaElement.addEventListener('timeupdate', function(e){
				    		var ct = mediaElement.currentTime;
				    		$("#currenttime_yt2_span").text(ct);
			    		});
		    		}
		    	});
		    			    	
		    	if(player_yt2 !== undefined)
			    {
			    	playerArr.push(player_yt2);
			    	$("#controls_yt2_div").show();	
			    	$("#pause_yt2_btn").click(function(){
				    	player_yt2.pause();
			    	});
			    	$("#play_yt2_btn").click(function(){
				    	player_yt1.play();
			    	});
			    	$("#mf_yt2_btn").click(function(){
				    	player_yt1.playmf();
			    	});
			    	$("#options_yt2_div").text(player_yt2.getOptions().mfURI).show();
			    }

			    //multiple subtitle
			    //http://www.youtube.com/watch?v=6OFXDcO7VCc
			    var mfuri_sub = "http://www.youtube.com/watch?v=6OFXDcO7VCc#t=30";
			    var tracks = [{srclang:"en", kind:"subtitles", type:"text/plain", src:"resources/en.srt"},
		    				{srclang:"ja", kind:"subtitles", type:"text/plain", src:"resources/ja.srt"},
		    				{srclang:"zh", kind:"subtitles", type:"text/plain", src:"resources/zh.srt"}];

		    	var player_sub = $("#player_sub_div").smfplayer({
		    		mfURI:mfuri_sub, 
		    		mfAlwaysEnabled:false,
		    		autoStart:false,
		    		width:480,
		    		height:320,
		    		success:function(mediaElement,domObject,p){
			    		mediaElement.addEventListener('timeupdate', function(e){
				    		var ct = mediaElement.currentTime;
				    		$("#currenttime_sub_span").text(ct);
			    		});
		    		},
		    		tracks:tracks
		    	});
		    			    	
		    	if(player_sub !== undefined)
			    {
			    	playerArr.push(player_sub);
			    	$("#controls_sub_div").show();	
			    	$("#pause_sub_btn").click(function(){
				    	player_yt2.pause();
			    	});
			    	$("#play_sub_btn").click(function(){
				    	player_yt1.play();
			    	});
			    	$("#mf_sub_btn").click(function(){
				    	player_yt1.playmf();
			    	});
			    	var srts = "Available subtitles:";
			    	$.each(tracks,function(idx,track){
			    		srts+=" "+track.srclang;
			    	});
			    	$("#options_sub_div").text(srts).show();
			    }
    	});
    </script>
    
  </head>

  <body>
  	<h1>Synote Media Fragment Player Demo</h1>
    <div class="container">
    	<h2>Mp4 file online</h2>
        <div class="row-fluid">
	        <div class="span11 offset1">
	        	<div id="player_mp4_div">
		        	
	        	</div>
	        	<div id="controls_mp4_div" style="display:none;">
		        	<button class="btn" id="play_mp4_btn">Play</button>
		        	<button class="btn" id="pause_mp4_btn">Pause</button>
		        	<button class="btn" id="mf_mp4_btn">Play MF</button>
		        	<div style="display:inline;">CurrentTime:<span id="currenttime_mp4_span"></span></div>
	        	</div>
	        	<div id="options_mp4_div" style="display:none"></div>
	      	</div>
        </div>
        <h2>YouTube Video 1</h2>
        <div class="row-fluid">
	        <div class="span11 offset1">
	        	<div id="player_yt1_div">
		        	
	        	</div>
	        	<div id="controls_yt1_div" style="display:none;">
		        	<button class="btn" id="play_yt1_btn">Play</button>
		        	<button class="btn" id="pause_yt1_btn">Pause</button>
		        	<button class="btn" id="mf_yt1_btn">Play MF</button>
		        	<div style="display:inline;">CurrentTime:<span id="currenttime_yt1_span"></span></div>
	        	</div>
	        	<div id="options_yt1_div" style="display:none"></div>
	      	</div>
        </div>
        <h2>YouTube Video 2</h2>
        <div class="row-fluid">
	        <div class="span11 offset1">
	        	<div id="player_yt2_div">
		        	
	        	</div>
	        	<div id="controls_yt2_div" style="display:none;">
		        	<button class="btn" id="play_yt2_btn">Play</button>
		        	<button class="btn" id="pause_yt2_btn">Pause</button>
		        	<button class="btn" id="mf_yt2_btn">Play MF</button>
		        	<div style="display:inline;">CurrentTime:<span id="currenttime_yt2_span"></span></div>
	        	</div>
	        	<div id="options_yt2_div" style="display:none"></div>
	      	</div>
        </div>
        <h2>Subtitles</h2>
        <div class="row-fluid">
	        <div class="span11 offset1">
	        	<div id="player_sub_div">
		        	
	        	</div>
	        	<div id="controls_sub_div" style="display:none;">
		        	<button class="btn" id="play_sub_btn">Play</button>
		        	<button class="btn" id="pause_sub_btn">Pause</button>
		        	<button class="btn" id="mf_sub_btn">Play MF</button>
		        	<div style="display:inline;">CurrentTime:<span id="currenttime_sub_span"></span></div>
	        	</div>
	        	<div id="options_sub_div" style="display:none"></div>
	      	</div>
        </div>
    </div> <!-- /container -->

  </body>
</html>
